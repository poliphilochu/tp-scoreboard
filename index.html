<!DOCTYPE html>
<html lang="zh-Hant">
<head>
	<meta charset="UTF-8">
	<title>菜P得分板</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript">
	$(function() {
		var scoreboard = [];
		var $count = $(".count");
		var countTotal = $count.length;

		var isWinner = function() {
			console.log(scoreboard);
			var max = Math.max.apply(null, scoreboard);
			console.log(max);
			max = max.toString();
			var i = scoreboard.indexOf(max);
			console.log(i);
			$(".player").eq(i).addClass("is-winner");
			// $(this).closest(".player").addClass("is-winner");	
		}

		$(".count").each(function(i) {
			var last = i == countTotal - 1 ? true : false;
			var score = $(this).text();
			scoreboard.push(score);

	    $(this).prop("Counter",0).animate({
	        Counter: score
	    }, {
	        duration: 2000,
	        easing: "swing",
	        step: function(now) {
            $(this).text(Math.ceil(now));
	        },
	        complete: function() {
	        	if (last) {
	        		isWinner();
	        	}
	        }
	    });
		});
	});
	</script>
</head>
<body>
<div id="page" class="container">
	<div id="player-p" class="player">
		<h2 class="player-name">朱</h2>
		<div class="total-score count">5</div>
	</div>
	<div id="player-t" class="player">
		<h2 class="player-name">菜</h2>
		<div class="total-score count">16</div>
	</div>
</div>
</body>
</html>